{"ast":null,"code":"import _toConsumableArray from\"/Users/zhubozhou/Documents/github/recipeee/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/zhubozhou/Documents/github/recipeee/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useRef,useEffect}from'react';import{useFetch}from'../../hooks/useFetch';import{useHistory}from'react-router-dom';import'./Create.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Create(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),method=_useState4[0],setMethod=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),cookingTime=_useState6[0],setCookingTime=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),newIngredient=_useState8[0],setNewIngredient=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),ingredients=_useState10[0],setIngredients=_useState10[1];var ingredientInput=useRef(null);var history=useHistory();var _useFetch=useFetch('http://localhost:3000/recipes','POST'),postData=_useFetch.postData,data=_useFetch.data,error=_useFetch.error;var submitHandler=function submitHandler(e){e.preventDefault();postData({title:title,ingredients:ingredients,method:method,cookingTime:cookingTime+' minutes'});};var addHandler=function addHandler(e){e.preventDefault();var ing=newIngredient.trim();if(ing&&!ingredients.includes(ing)){setIngredients(function(prevIngredients){return[].concat(_toConsumableArray(prevIngredients),[newIngredient]);});}setNewIngredient('');ingredientInput.current.focus();};useEffect(function(){if(data){history.push('/');}},[data,history]);return/*#__PURE__*/_jsxs(\"div\",{className:\"create\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"page-title\",children:\"Add a New Recipe\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Recipe title:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:function onChange(e){return setTitle(e.target.value);},value:title,required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Recipe Ingredients:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ingredients:\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:function onChange(e){return setNewIngredient(e.target.value);},value:newIngredient,ref:ingredientInput}),/*#__PURE__*/_jsx(\"button\",{onClick:addHandler,className:\"btn\",children:\"add\"})]})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Current ingredients: \",ingredients.map(function(ing){return/*#__PURE__*/_jsxs(\"em\",{children:[ing,\", \"]},ing);})]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Recipe Method:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:function onChange(e){return setMethod(e.target.value);},value:method,required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Cooking time (minutes):\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",onChange:function onChange(e){return setCookingTime(e.target.value);},value:cookingTime,required:true})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",children:\"submit\"})]})]});}","map":{"version":3,"names":["useState","useRef","useEffect","useFetch","useHistory","Create","title","setTitle","method","setMethod","cookingTime","setCookingTime","newIngredient","setNewIngredient","ingredients","setIngredients","ingredientInput","history","postData","data","error","submitHandler","e","preventDefault","addHandler","ing","trim","includes","prevIngredients","current","focus","push","target","value","map"],"sources":["/Users/zhubozhou/Documents/github/recipeee/src/pages/create/Create.js"],"sourcesContent":["import { useState, useRef, useEffect } from 'react'\nimport { useFetch } from '../../hooks/useFetch'\nimport { useHistory } from 'react-router-dom'\nimport './Create.css'\n\nexport default function Create() {\n  const [title, setTitle] = useState('')\n  const [method, setMethod] = useState('')\n  const [cookingTime, setCookingTime] = useState('')\n  const [newIngredient, setNewIngredient] = useState('')\n  const [ingredients, setIngredients] = useState([])\n  \n  const ingredientInput = useRef(null)\n  const history = useHistory()\n  const {postData, data, error} = useFetch('http://localhost:3000/recipes','POST')\n  \n  const submitHandler = (e) => {\n    e.preventDefault()\n    postData({title, ingredients, method, cookingTime: cookingTime+' minutes'})\n  }\n  \n  const addHandler = (e) => {\n    e.preventDefault()\n    const ing = newIngredient.trim()\n    if (ing && !ingredients.includes(ing)) {\n      setIngredients(prevIngredients => [...prevIngredients, newIngredient])\n    }\n    setNewIngredient('')\n    ingredientInput.current.focus()\n  }\n\n  useEffect(() => {\n    if (data) {\n      history.push('/')\n    }\n  }, [data, history])\n  \n  return (\n    <div className=\"create\">\n      <h2 className='page-title'>Add a New Recipe</h2>\n\n      <form onSubmit={submitHandler}>\n        <label>\n          <span>Recipe title:</span>\n          <input type='text' onChange={(e) => setTitle(e.target.value)} value={title} required />\n        </label>\n\n        <label>\n          <span>Recipe Ingredients:</span>\n          <div className='ingredients:'>\n            <input type='text' onChange={(e) => setNewIngredient(e.target.value)} value={newIngredient} ref={ingredientInput} />\n            <button onClick={addHandler} className='btn'>add</button>\n          </div>\n        </label>\n        <p>Current ingredients: {ingredients.map(ing => <em key={ing}>{ing}, </em>)}</p>\n\n        <label>\n          <span>Recipe Method:</span>\n          <input type='text' onChange={(e) => setMethod(e.target.value)} value={method} required />\n        </label>\n\n        <label>\n          <span>Cooking time (minutes):</span>\n          <input type='number' onChange={(e) => setCookingTime(e.target.value)} value={cookingTime} required />\n        </label>\n\n        <button className=\"btn\">submit</button>\n      </form>\n    </div>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}